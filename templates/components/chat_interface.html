<!-- Tabs -->
<ul class="nav nav-tabs mb-3" id="chatTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="voice-tab" data-bs-toggle="tab" data-bs-target="#voice-chat" type="button" role="tab" aria-controls="voice-chat" aria-selected="true">
            <i class="bi bi-mic"></i> Voice Chat
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="text-tab" data-bs-toggle="tab" data-bs-target="#text-chat" type="button" role="tab" aria-controls="text-chat" aria-selected="false">
            <i class="bi bi-chat-text"></i> Text Chat
        </button>
    </li>
</ul>

<!-- Tab Content -->
<div class="tab-content" id="chatTabsContent">
    <!-- Voice Chat Tab -->
    <div class="tab-pane fade show active" id="voice-chat" role="tabpanel" aria-labelledby="voice-tab">
        <div class="voice-chat-container">
            <div class="voice-controls text-center mb-4">
                <div class="record-button-container">
                    <button id="recordButton" class="btn btn-lg btn-record">
                        <i class="bi bi-mic"></i>
                    </button>
                    <div class="record-text">Press and Hold to Speak</div>
                </div>
            </div>
            
            <div class="voice-messages" id="voice-messages">
                <!-- Voice messages will be added here dynamically -->
            </div>
        </div>
    </div>

    <!-- Text Chat Tab -->
    <div class="tab-pane fade" id="text-chat" role="tabpanel" aria-labelledby="text-tab">
        <div class="chat-input-form">
            <form id="chat-form">
                <div class="input-group">
                    <input type="text" id="message-input" class="form-control" placeholder="Type your message..." required>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-send"></i>
                    </button>
                </div>
            </form>
        </div>
        <div class="typing-indicator" id="typing-indicator" style="display: none;">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
        <div class="chat-messages custom-scrollbar" id="chat-messages">
            {% for message in messages %}
            <div class="message {% if message.is_ai_response %}ai-message{% else %}user-message{% endif %} message-appear">
                <div class="message-content">{{ message.content }}</div>
                <div class="message-timestamp">{{ message.timestamp.strftime('%I:%M %p') }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
